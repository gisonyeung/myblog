<!DOCTYPE html>
<html lang="en">
<head>
	<meta name="renderer" content="webkit">
	<meta charset="UTF-8">
	<title>博文管理</title>
	<link rel="stylesheet" href="/backstage/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" href="/backstage/css/base.css">
	<link rel="stylesheet" href="/backstage/css/editor.css">
</head>
<body>
	<div id="wrap">
		<div class="sidebar">
			<ul class="nav">
				<li class="active"><a href="#">博文管理</a></li>
				<li><a href="/admin/category">分类管理</a></li>
				<li><a href="/admin/tag">标签管理</a></li>
				<li><a href="/admin/walkingblog">行博管理</a></li>
				<li><a href="/admin/book">书单管理</a></li>
				<li><a href="/admin/comment">评论管理</a></li>
				<li><a href="/admin/tourist">游客管理</a></li>
				<li><a href="/admin/member">订阅管理</a></li>
			</ul>
		</div>
		<div class="main">
			<h2 class="title">博文管理</h2>
			<div class="content">
				<div class="panel-btn container-fluid">
			        <div class="collapse navbar-collapse">
			          <ul class="nav navbar-nav">
			            <li class="toggle-btn active" data-target="#panel1"><a href="javascript:;">博文列表</a></li>
			            <li class="toggle-btn" data-target="#panel2"><a href="javascript:;">发布博文</a></li>
			            <li class="toggle-btn" data-target="#panel3"><a href="javascript:;">修改博文</a></li>
			          </ul>
			        </div><!-- /.navbar-collapse -->
			    </div>
				
				<div class="panel open" id="panel1">
					<table class="table table-condensed table-hover table-striped">
						<thead>
							<tr>
								<td width="50">blogId</td>
								<td width="140">发布时间</td>
								<td width="140">更新时间</td>
								<td width="110">分类</td>
								<td width="130">标签</td>
								<td>标题</td>
								<td width="100">阅读/评论/点赞数</td>
								<td width="50">状态</td>
								<td width="300">操作</td>
							</tr>
						</thead>
						<tbody id="tbody">
							<tr class="no-record">
								<td colSpan="20">暂无记录</td>
							</tr>
						</tbody>
					</table>
					<nav class="paging" id="paging1"  data-current="1" data-all="2"></nav>
				</div>
				<div class="panel" id="panel2">
					<div class="pub-cont">
						<span class="switch btn btn-default btn-xs">显隐面板</span>
						<p class="cache-tip"><span class="emoji">🕗</span><span class="cache-time">2016-08-13 11:19:23</span>保存草稿到 LocalStorage</p>
						<form action="/admin/addBlog" enctype="multipart/form-data" method="POST">
							<div class="switch-panel">
								<div class="form-group">
									<label for="blog-title">标题</label>
								    <input type="text" class="form-control" id="blog-title" placeholder="文章标题" required>
								</div>
								<div class="form-group">
									<label for="blog-category">分类</label>
								    <input type="text" class="form-control cate-input" id="blog-category" placeholder="分类" name="category">
								    <ul class="select-list cate-list" data-target="#blog-category"></ul>
								</div>
								<div class="form-group">
									<label for="blog-summation">摘要</label>
								    <textarea class="form-control" id="blog-summation" placeholder="摘要" rows="4" required name="summation"></textarea>
								</div>
								<div class="form-group">
									<label for="blog-tags">标签</label>
								    <input type="text" class="form-control tag-input" id="blog-tags" placeholder="标签（半角逗号分隔）" name="tags">
								     <ul class="select-list tag-list" data-target="#blog-tags"></ul>
								</div>
								<div class="form-group">
									<label for="isNotice">是否进行邮件通知</label>
									<select name="isNotice" id="isNotice" class="form-control">
										<option value="true" selected>是</option>
										<option value="false">否</option>
									</select>
								</div>
							</div>
							<div class="form-group">
							    <label for="photo">图片</label>
							    <input type="file" id="photo" name="photo" accept="image/*">
							    <span class="btn btn-primary btn-xs upload-photo" id="get-photo-url" data-target="#blog-content" data-file="photo">上传图片</span>
							    <p class="help-block">jpg、png、gif等图片格式</p>
							</div>
							<div class="form-group">
								<label for="blog-content">内容</label>
							    <textarea class="form-control editor" id="blog-content" placeholder="内容" rows="15" name="content" data-target="#preview1" required></textarea>
							</div>

							<span class="btn btn-primary" id="save-draft">保存草稿</span>
							<input type="submit" class="btn btn-success" value="提交" id="add-submit">
						</form>
					</div>
					<div class="pre-cont">
						<!-- <div class="preview" id="preview1"></div> -->
						<iframe src="/backstage/html/preview.html" frameborder="0" name="Preview" id="Preview"></iframe>
					</div>
				</div>
				<div class="panel" id="panel3">
					<div class="pub-cont">
						<span class="switch btn btn-default btn-xs">显隐面板</span>
						<form action="/admin/editBlog" enctype="multipart/form-data" method="POST">
							<div class="switch-panel">
								<div class="form-group">
									<label for="edit-title">标题</label>
								    <input type="text" class="form-control" id="edit-title" placeholder="文章标题" required>
								</div>
								<div class="form-group">
									<label for="edit-category">分类</label>
								    <input type="text" class="form-control cate-input" id="edit-category" placeholder="分类" name="category">
								    <ul class="select-list cate-list" data-target="#edit-category"></ul>
								</div>
								<div class="form-group">
									<label for="edit-summation">摘要</label>
								    <textarea class="form-control" id="edit-summation" placeholder="摘要" rows="4" required name="summation"></textarea>
								</div>
								<div class="form-group">
									<label for="edit-tags">标签</label>
								    <input type="text" class="form-control tag-input" id="edit-tags" placeholder="标签（半角逗号分隔）" name="tags">
								     <ul class="select-list tag-list" data-target="#edit-tags"></ul>
								</div>
							</div>
							<div class="form-group">
							    <label for="photo">图片</label>
							    <input type="file" id="photo1" name="photo" accept="image/*">
							    <span class="btn btn-primary btn-xs upload-photo" data-target="#edit-content" data-file="photo1">上传图片</span>
							    <p class="help-block">jpg、png、gif等图片格式</p>
							</div>
							<div class="form-group">
								<label for="edit-content">内容</label>
							    <textarea class="form-control editor" id="edit-content" placeholder="内容" rows="15" name="content" data-target="#preview1" required></textarea>
							</div>
							<hr>
							<div class="form-group">
							    <p class="help-block">
									blogId: <span class="edit-value"></span>
									阅读/评论/点赞数: <span class="edit-value"></span>
									状态: <span class="edit-value"></span>
							    </p>	
								<p class="help-block">
									<span class="label-time">发布时间: </span>
									<span class="edit-value"></span>
							    </p>	
							    <p class="help-block">
							    	<span class="label-time">上次更新时间: </span>
							    	<span class="edit-value"></span>
							    </p>
							</div>
							<input type="submit" class="btn btn-success" value="修改" id="edit-submit">
						</form>
					</div>
					<div class="pre-cont">
						<iframe src="/backstage/html/preview.html" frameborder="0" name="Preview2" id="Preview2"></iframe>
					</div>
				</div>

			</div>
		</div>

	</div>
	<script src="/backstage/js/jquery-1.9.1.min.js"></script>
	<script src="/backstage/bootstrap/js/bootstrap.min.js"></script>
	<script src="/backstage/js/global.js"></script>
	<script src="/backstage/js/ajaxfileupload.js"></script>
	<script src="/backstage/js/parseMarkDown.js"></script>
	<script src="/backstage/js/showdown.min.js"></script>
	<script src="/backstage/js/blog.js"></script>
	<script>
		function adjustHeight(id, height) {
			$('#' + id).height(height);
		}
	</script>
	<script type="text/template" id="blog_tr_rpl">
		<tr class="blog">
			<td>{{blogId}}</td>
			<td>{{time_createAt}}</td>
			<td>{{time_updateAt}}</td>
			<td>{{category}}</td>
			<td>{{tags}}</td>
			<td>{{title}}</td>
			<td>{{numbers_view}}/<span class="numbers-comment">{{numbers_comment}}</span>/{{numbers_like}}</td>
			<td class="status-value">{{status}}</td>
			<td>
				<a href="{{url}}" class="btn btn-default btn-xs" target="_blank">查看</a>
				<button class="btn btn-default btn-xs update" data-target="{{blogId}}">更新评论数</button>
				<button class="btn btn-default btn-xs edit" data-target="{{_id}}">修改</button>
				<button class="btn btn-default btn-xs status" data-target="{{_id}}">{{status_btn}}</button>
				<button class="btn btn-default btn-xs delete" data-target="{{_id}}">删除</button>
			</td>
		</tr>
	</script>
	<script type="text/template" id="norecord_rpl">
		<tr class="no-record">
			<td colSpan="20">暂无记录</td>
		</tr>
	</script>

</body>
</html>